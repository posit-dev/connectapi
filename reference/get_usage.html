<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Get usage information for deployed content — get_usage • connectapi</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get usage information for deployed content — get_usage"><meta name="description" content="Retrieve content hits for all available content on the server. Available
content depends on the user whose API key is in use. Administrator accounts
will receive data for all content on the server. Publishers will receive data
for all content they own or collaborate on.
If no date-times are provided, all usage data will be returned."><meta property="og:description" content="Retrieve content hits for all available content on the server. Available
content depends on the user whose API key is in use. Administrator accounts
will receive data for all content on the server. Publishers will receive data
for all content they own or collaborate on.
If no date-times are provided, all usage data will be returned."><meta property="og:image" content="https://posit-dev.github.io/connectapi/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">connectapi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.8.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/connectapi_tags.html">connectapi Tags</a></li>
    <li><a class="dropdown-item" href="../articles/content_permissions.html">Content Permissions</a></li>
    <li><a class="dropdown-item" href="../articles/customize-http.html">Customize HTTP Requests</a></li>
    <li><a class="dropdown-item" href="../articles/getting-started.html">Getting Started with connectapi</a></li>
    <li><a class="dropdown-item" href="../articles/lifecycle-statuses.html">Lifecycle Statuses</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/posit-dev/connectapi/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Get usage information for deployed content</h1>
      <small class="dont-index">Source: <a href="https://github.com/posit-dev/connectapi/blob/v0.8.0/R/get.R" class="external-link"><code>R/get.R</code></a></small>
      <div class="d-none name"><code>get_usage.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Retrieve content hits for all available content on the server. Available
content depends on the user whose API key is in use. Administrator accounts
will receive data for all content on the server. Publishers will receive data
for all content they own or collaborate on.</p>
<p>If no date-times are provided, all usage data will be returned.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_usage</span><span class="op">(</span><span class="va">client</span>, from <span class="op">=</span> <span class="cn">NULL</span>, to <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-client">client<a class="anchor" aria-label="anchor" href="#arg-client"></a></dt>
<dd><p>A <code>Connect</code> R6 client object.</p></dd>


<dt id="arg-from">from<a class="anchor" aria-label="anchor" href="#arg-from"></a></dt>
<dd><p>Optional date-time (<code>POSIXct</code> or <code>POSIXlt</code>). Only
records after this time are returned. If not provided, records
are returned back to the first record available.</p></dd>


<dt id="arg-to">to<a class="anchor" aria-label="anchor" href="#arg-to"></a></dt>
<dd><p>Optional date-time (<code>POSIXct</code> or <code>POSIXlt</code>). Only records
before this time are returned. If not provided, all records up to
the most recent are returned.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list of usage records. Each record is a list with all elements
as character strings unless otherwise specified.</p><ul><li><p><code>id</code>: An integer identifier for the hit.</p></li>
<li><p><code>user_guid</code>: The user GUID if the visitor is logged-in, <code>NULL</code> for
anonymous hits.</p></li>
<li><p><code>content_guid</code>: The GUID of the visited content.</p></li>
<li><p><code>timestamp</code>: The time of the hit in RFC3339 format.</p></li>
<li><p><code>data</code>: A nested list with optional fields:</p><ul><li><p><code>path</code>: The request path (if recorded).</p></li>
<li><p><code>user_agent</code>: The user agent string (if available).</p></li>
</ul></li>
</ul><p>Use <code><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame()</a></code> or <code><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">tibble::as_tibble()</a></code> to convert to a flat
table with parsed types. In the resulting data frame:</p><ul><li><p><code>timestamp</code> is parsed to <code>POSIXct</code>.</p></li>
<li><p><code>path</code> and <code>user_agent</code> are extracted from the nested <code>data</code> field.</p></li>
</ul><p>By default, <code><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame()</a></code> attempts to extract the nested fields using
the <span class="pkg">tidyr</span> package. If <span class="pkg">tidyr</span> is not available, or if you want to
skip unnesting, call <code>as.data.frame(x, unnest = FALSE)</code> to leave <code>data</code> as
a list-column.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The data returned by <code>get_usage()</code> includes all content types. For Shiny
content, the <code>timestamp</code> indicates the <em>start</em> of the Shiny session.
Additional fields for Shiny and non-Shiny are available respectively from
<code><a href="get_usage_shiny.html">get_usage_shiny()</a></code> and <code><a href="get_usage_static.html">get_usage_static()</a></code>. <code><a href="get_usage_shiny.html">get_usage_shiny()</a></code> includes a
field for the session end time; <code><a href="get_usage_static.html">get_usage_static()</a></code> includes variant,
rendering, and bundle identifiers for the visited content.</p>
<p>When possible, however, we recommend using <code>get_usage()</code> over
<code><a href="get_usage_static.html">get_usage_static()</a></code> or <code><a href="get_usage_shiny.html">get_usage_shiny()</a></code>, as it is faster and more efficient.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="as.data.frame.connect_list_hits.html">as.data.frame.connect_list_hits()</a></code>, <code><a href="as_tibble.connect_list_hits.html">as_tibble.connect_list_hits()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">client</span> <span class="op">&lt;-</span> <span class="fu"><a href="connect.html">connect</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Fetch the last 2 days of hits</span></span></span>
<span class="r-in"><span><span class="va">usage</span> <span class="op">&lt;-</span> <span class="fu">get_usage</span><span class="op">(</span><span class="va">client</span>, from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="fl">2</span>, to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Fetch usage after a specified date and convert to a data frame.</span></span></span>
<span class="r-in"><span><span class="va">usage</span> <span class="op">&lt;-</span> <span class="fu">get_usage</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">client</span>,</span></span>
<span class="r-in"><span>  from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="st">"2025-05-02 12:40:00"</span>, tz <span class="op">=</span> <span class="st">"UTC"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Fetch all usage</span></span></span>
<span class="r-in"><span><span class="va">usage</span> <span class="op">&lt;-</span> <span class="fu">get_usage</span><span class="op">(</span><span class="va">client</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Convert to tibble or data frame</span></span></span>
<span class="r-in"><span><span class="va">usage_df</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="va">usage</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Skip unnesting if tidyr is not installed</span></span></span>
<span class="r-in"><span><span class="va">usage_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">usage</span>, unnest <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Toph Allen, Neal Richardson, Sean Lopp, Cole Arendt, Posit, PBC.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

